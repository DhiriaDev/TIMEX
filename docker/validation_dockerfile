#syntax=docker/dockerfile:1

FROM baseimage:latest

WORKDIR /timexdocker
RUN poetry install

COPY TIMEX ./TIMEX
WORKDIR /timexdocker/TIMEX
RUN poetry install

WORKDIR /timexdocker
COPY Redpanda ./Redpanda
COPY modules/validation.py ./
COPY validation_server ./validation_server
COPY redpanda-ca.crt ./
COPY entrypoints/go/watcher ./
COPY envs/DEPLOYENV ./.env

ENTRYPOINT [ "./watcher"]
CMD [""]