#syntax=docker/dockerfile:1

FROM archlinux:base-20221113.0.102112

ENV PYTHONUNBUFFERED=1 \
    PYTHONDONTWRITEBYTECODE=1 \
    PIP_DISABLE_PIP_VERSION_CHECK=on \
    POETRY_NO_INTERACTION=1

RUN pacman -Syy
RUN pacman -Syu --noconfirm python python-pip

RUN pip install --no-cache-dir poetry==1.2.2

WORKDIR /timexdocker

RUN mkdir TIMEX
RUN mkdir TIMEX/timexseries
RUN touch TIMEX/timexseries/__init__.py
RUN touch TIMEX/README.md
COPY TIMEX/pyproject.toml TIMEX/poetry.lock ./TIMEX

COPY pyproject.toml poetry.lock ./
RUN poetry config virtualenvs.create false \
    && poetry install --no-root
