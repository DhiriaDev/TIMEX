#syntax=docker/dockerfile:1

FROM baseimage:latest

WORKDIR /timexdocker/TIMEX
RUN poetry install --with data_prediction --no-root

WORKDIR /timexdocker
COPY TIMEX ./TIMEX
WORKDIR /timexdocker/TIMEX
RUN poetry install --with data_prediction

WORKDIR /timexdocker
COPY Redpanda ./Redpanda
COPY modules/prediction.py ./
COPY modules/validation_functions.py ./
COPY redpanda-ca.crt ./
COPY entrypoints/go/watcher ./
COPY envs/DEPLOYENV ./.env


ENTRYPOINT [ "./watcher"]
#ENTRYPOINT [ "python", "./prediction.py"]
CMD [""]